@using Microsoft.AspNetCore.Identity;
@{
	ViewData["Title"] = "Управление пользователей";
}
@model Dictionary<User, IList<string>>

<style>
    header {
        display:none !important;
    }
</style>

<div class="container mt-5">
    <h2 class="mb-4">Управление пользователями</h2>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a asp-action="Index" asp-controller="Home">Главная</a></li>
            <li class="breadcrumb-item"><a asp-action="Index" asp-controller="User">Dashboard</a></li>
            <li class="breadcrumb-item active" aria-current="page">UserManagement</li>
        </ol>
    </nav>

    <div class="row">
        <div class="col-md-12">
            <table class="table table-bordered table-hover">
                <thead>
                    <tr>
                        <th>ФИО</th>
                        <th>Отделение</th>
                        <th>Роль</th>
                        <th>Логин</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var item in Model)
                    {
                        var user = item.Key;
                        var roles = item.Value;
                        <tr>
                            <td>@user.FIO</td>
                            <td>@user.Department</td>
                            <td>
                                @if (roles.Count > 1)
                                {
                                    @String.Join(", ", roles)
                                }
                                else if (roles.Count == 1)
                                {
                                    @roles[0]
                                }

                            </td>
                            <td>@user.UserName</td>
                            <td>
                                <div class="btn-group" role="group" aria-label="Действия">
                                    <a class="btn btn-primary" href="@Url.Action("Edit", new { id = user.Id })"><i class="bi bi-pencil-fill"></i> Изменить</a>
                                    <form asp-action="Delete" asp-route-id="@user.Id" method="post">
                                        <button type="submit" class="btn  btn-danger"><i class="bi bi-archive-fill"></i> Удалить</button>
                                    </form>
                                </div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col-md-12">
            <a class="btn btn-success" href="@Url.Action("Create")">Добавить нового пользователя</a>
        </div>
    </div>
</div>